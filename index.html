<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" href="favicon.ico" type="image/x-icon"> 
  <title>PROGRAMA REATIVA - Mega Mais Prote√ß√£o Patrimonial</title>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- html2canvas e jsPDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: "Poppins", sans-serif;
    }

    body {
      background: linear-gradient(to top, #0c3483 0%, #173D5D 100%);
      color: #fff;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .logo {
      width: 20%;
      max-width: 45%;
      margin-bottom: 5px;
      margin-top: -10px;
      animation: fadeIn 1s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    h1 {
      text-align: center;
      font-size: 2.5rem;
      margin-bottom: 5px;
      line-height: 1.3;
      color:#FF8341;
    }

    p.subtitle {
      text-align: center;
      margin-bottom: 30px;
      font-size: 1.1rem;
    }

    .calculator {
      background: #ffffff;
      color: #333;
      border-radius: 20px;
      padding: 30px;
      max-width: 500px;
      width: 100%;
      box-shadow: 0 5px 25px rgba(0, 0, 0, 0.3);
    }

    .calculator h2 {
      text-align: center;
      color: #173D5D;
      margin-bottom: 20px;
    }

    .input-group {
      margin-bottom: 20px;
    }

    label {
      font-weight: bold;
      display: block;
      margin-bottom: 5px;
    }

    input {
      width: 100%;
      padding: 10px;
      border: 2px solid #173D5D;
      border-radius: 10px;
      font-size: 1rem;
      outline: none;
    }

    button {
      background: #FF8341;
      color: #fff;
      border: none;
      padding: 12px 20px;
      border-radius: 10px;
      font-size: 1.1rem;
      cursor: pointer;
      width: 100%;
      transition: 0.3s;
      font-weight: bold;
      margin-top: 10px;
    }

    button:hover {
      background: #8F4923;
    }

    .result {
      margin-top: 25px;
      background: linear-gradient(to top, #173D5D 0%, #6f86d6 100%);
      color: #fff;
      padding: 20px;
      border-radius: 15px;
      text-align: center;
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
    }

    .result h3 {
      margin-bottom: 10px;
    }

    .result ul {
      list-style: none;
      text-align: left;
      margin-top: 10px;
      font-size: 1.1rem;
    }

    .highlight {
      color: #ffeb3b;
      font-weight: bold;
    }

    .chart-container {
      margin-top: 20px;
    }

    footer {
      margin-top: 30px;
      text-align: center;
      font-size: 0.9rem;
      opacity: 0.9;
    }

#campoWhats {
  margin-top: 15px;
}

#campoWhats input {
  border: 2px solid #FF8341;
}

    @media (max-width: 480px) {
      h1 { font-size: 1.7rem; }
      .calculator { padding: 20px; }
      .logo { width: 130px; }
    }
  </style>
</head>

<body>
  <img src="logo.png" alt="Logo Mega Mais Prote√ß√£o Patrimonial" class="logo" />
  <h1>PROGRAMA REATIVA</h1>
  <h2>üí• Oportunidade Imperd√≠vel!</h2>

  <p class="subtitle">
    A <strong>Mega Mais Prote√ß√£o Patrimonial</strong> est√° oferecendo descontos progressivos para voc√™ continuar protegido com o menor impacto no seu bolso.
  </p>

  <div class="calculator">
    <h2>Calculadora de Reajuste Progressivo</h2>

    <div class="input-group">
      <label for="valorAntigo">üí∞ Valor anterior da mensalidade (R$):</label>
      <input type="number" id="valorAntigo" placeholder="Ex: 360" step="0.01" />
    </div>

    <div class="input-group">
      <label for="valorNovo">üöó Valor reajustado (R$):</label>
      <input type="number" id="valorNovo" placeholder="Ex: 414" step="0.01" />
    </div>

    <div class="input-group">
      <label for="meses">üìÜ Quantidade de meses para diluir (5 a 12):</label>
      <input type="number" id="meses" placeholder="Ex: 6" min="5" max="12" />
    </div>

    <button onclick="calcular()">Calcular Desconto Progressivo</button>

    <div id="resultado" class="result" style="display: none;"></div>
    <canvas id="grafico" class="chart-container" style="display:none; width:100%;"></canvas>

    <div id="whatsContainer" style="display: none; margin-top: 15px;">
  <div class="input-group">
    <label for="numeroWhatsApp">üìû N√∫mero para envio (com DDD):</label>
    <input type="tel" id="numeroWhatsApp" placeholder="Ex: 31987654321" maxlength="13" />
  </div>
  <button id="btnWhats" onclick="compartilharWhatsApp()">üì± Enviar pelo WhatsApp</button>
</div>

    <button id="btnPDF" style="display:none;" onclick="gerarPDF()">üìÑ Baixar em PDF</button>
  </div>

  <footer>
    ¬© 2025 Mega Mais Prote√ß√£o Patrimonial - Todos os direitos reservados.
  </footer>

  <script>
  let chart;

  function calcular() {
    const valorAntigo = parseFloat(document.getElementById("valorAntigo").value);
    const valorNovo = parseFloat(document.getElementById("valorNovo").value);
    const meses = parseInt(document.getElementById("meses").value);
    const resultado = document.getElementById("resultado");
    const grafico = document.getElementById("grafico");
    const whatsContainer = document.getElementById("whatsContainer");
    const btnPDF = document.getElementById("btnPDF");

    if (isNaN(valorAntigo) || isNaN(valorNovo) || isNaN(meses) ||
        valorAntigo <= 0 || valorNovo <= 0 || meses < 5 || meses > 12) {
      resultado.style.display = "block";
      resultado.innerHTML = "<h3>‚ö†Ô∏è Preencha todos os campos corretamente (5 a 12 meses).</h3>";
      grafico.style.display = "none";
      whatsContainer.style.display = "none";
      btnPDF.style.display = "none";
      return;
    }

    const primeiroMes = valorAntigo * 0.9;
    const diferenca = valorNovo - primeiroMes;
    const incremento = diferenca / (meses - 1);
    const valores = [];

    for (let i = 0; i < meses; i++) {
      valores.push((primeiroMes + incremento * i).toFixed(2));
    }

    resultado.style.display = "block";
    resultado.innerHTML = `
      <h3>üéâ Confira seu plano com desconto progressivo:</h3>
      <ul>
        ${valores.map((v, i) => `<li>${i + 1}¬∫ m√™s: <span class="highlight">R$ ${v}</span></li>`).join("")}
      </ul>
      <p>üí° Aproveite essa oportunidade exclusiva e continue com a seguran√ßa, agilidade e credibilidade da <strong>Mega Mais Prote√ß√£o Patrimonial</strong>.</p>
      <p>Agora com <strong>indeniza√ß√£o em at√© 30 dias</strong> e <strong>ap√≥lice de seguro auto regulamentada pela SUSEP!</strong></p>
    `;

    // Mostra apenas ap√≥s o c√°lculo
    whatsContainer.style.display = "block";
    btnPDF.style.display = "block";
    grafico.style.display = "block";

    // Atualiza o gr√°fico
    if (chart) chart.destroy();

    chart = new Chart(grafico, {
      type: "line",
      data: {
        labels: valores.map((_, i) => `${i + 1}¬∫ m√™s`),
        datasets: [{
          label: "Evolu√ß√£o do valor mensal",
          data: valores,
          borderColor: "#FF8341",
          backgroundColor: "rgba(255,131,65,0.2)",
          borderWidth: 3,
          tension: 0.4,
          fill: true
        }]
      },
      options: {
        scales: { y: { beginAtZero: false } },
        plugins: { legend: { display: false } }
      }
    });

    // Guarda os valores para uso no WhatsApp
    window.valoresSimulados = valores;
    window.meses = meses;
  }

  function compartilharWhatsApp() {
    const valores = window.valoresSimulados;
    const inputNumero = document.getElementById("numeroWhatsApp");
    const numeroWhatsApp = inputNumero.value.trim();

    if (!valores) {
      alert("‚ö†Ô∏è Fa√ßa o c√°lculo primeiro antes de compartilhar.");
      return;
    }

    if (!numeroWhatsApp || isNaN(numeroWhatsApp)) {
      alert("üì± Por favor, digite um n√∫mero de WhatsApp v√°lido (somente n√∫meros, com DDD).");
      inputNumero.focus();
      return;
    }

    const mensagem = `Confira seu plano com desconto progressivo na Mega Mais Prote√ß√£o Patrimonial:\n\n${valores.map((v, i) => `${i + 1}¬∫ m√™s: R$ ${v}`).join("\n")}\n\nIndeniza√ß√£o em at√© 30 dias!\n Agora com ap√≥lice regulamentada pela SUSEP.\n\nAproveite essa oportunidade!`;

    const link = `https://wa.me/55${numeroWhatsApp}?text=${encodeURIComponent(mensagem)}`;
    window.open(link, "_blank");
  }

  async function gerarPDF() {
    const { jsPDF } = window.jspdf;
    const resultadoDiv = document.getElementById("resultado");

    const canvas = await html2canvas(resultadoDiv, {
      scale: 2,
      scrollY: -window.scrollY,
      useCORS: true
    });

    const imgData = canvas.toDataURL("image/png");
    const pdf = new jsPDF("p", "mm", "a4");
    const imgWidth = 210;
    const pageHeight = 297;
    const imgHeight = (canvas.height * imgWidth) / canvas.width;
    let heightLeft = imgHeight;
    let position = 0;

    pdf.addImage(imgData, "PNG", 0, position, imgWidth, imgHeight);
    heightLeft -= pageHeight;

    while (heightLeft > 0) {
      position = heightLeft - imgHeight;
      pdf.addPage();
      pdf.addImage(imgData, "PNG", 0, position, imgWidth, imgHeight);
      heightLeft -= pageHeight;
    }

    pdf.save("Simulacao_MegaMais.pdf");
  }
</script>

</body>
</html>
